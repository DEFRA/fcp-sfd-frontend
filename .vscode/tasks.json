{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "â¬†ï¸ Up Frontend",
      "detail": "Start up the local docker dev environment",
      "type": "shell",
      "command": "docker compose up --build",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "â¬‡ï¸ Down Frontend",
      "detail": "Stop and drop the containers",
      "type": "shell",
      "command": "docker compose down; echo \"All done! ğŸ‰\"",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "ğŸªµ Log Frontend",
      "detail": "Show the logs for the frontend",
      "type": "shell",
      "command": "docker compose logs -f",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "âœ… Test Frontend",
      "detail": "Run all unit tests for Frontend",
      "type": "shell",
      "command": "docker compose down -v && docker compose -f compose.yaml -f compose.test.yaml run --build --rm 'fcp-sfd-frontend'",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "â€¼ï¸ Only Test Frontend",
      "detail": "Run the currently selected test file for frontend",
      "type": "shell",
      "command" : "docker compose down -v && docker compose -f compose.yaml -f compose.test.yaml run --rm fcp-sfd-frontend npx vitest run ${relativeFile}",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "ğŸ” Lint Frontend",
      "detail": "Run linting on the frontend",
      "type": "shell",
      "command": "npm run lint; echo \"All done! ğŸ‰\"",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "ğŸ§¹ Lint Fix",
      "detail": "Automatically fix linting issues in the codebase",
      "type": "shell",
      "command": "npm run lint:fix; echo \"Code cleaned! âœ¨\"",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "ğŸ› ï¸ Clean Frontend",
      "detail": "Will drop the containers, remove related images and volumes",
      "type": "shell",
      "command": "docker compose down --rmi local -v; echo \"All done! ğŸ‰\"",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "â¯ï¸ Restart Frontend",
      "detail": "Restart the frontend app",
      "type": "shell",
      "command": "docker compose restart",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "ğŸ¥¸ DefraID: Enable stub",
      "detail": "Switch frontend to use DefraID stub and recreate containers",
      "type": "shell",
      "command": "docker compose up -d --force-recreate && echo \"DefraID stub enabled â€“ containers restarted ğŸ‰\"",
      "options": {
        "env": {
          "DEFRA_ID_WELL_KNOWN_URL": "http://host.docker.internal:3007/idphub/b2c/b2c_1a_cui_cpdev_signupsigninsfi/.well-known/openid-configuration"
        }
      },
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "ğŸ¤¡ DefraID: Disable stub",
      "detail": "Switch frontend back to real DefraID and restart containers",
      "type": "shell",
      "command": "docker compose up -d --force-recreate && echo \"DefraID stub disabled â€“ containers restarted ğŸ‰\"",
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "ğŸ¥¸ğŸ§ª DefraID stub + DAL upstream mock",
      "detail": "Use DefraID stub and local DAL upstream mock together (requires compose.kits-local.yaml)",
      "type": "shell",
      "command": "docker compose -f compose.yaml -f compose.override.yaml -f compose.kits-local.yaml up -d --build --force-recreate && echo \"DefraID stub + DAL upstream mock enabled â€“ containers restarted ğŸ‰\"",
      "options": {
        "env": {
          "DEFRA_ID_WELL_KNOWN_URL": "http://host.docker.internal:3007/idphub/b2c/b2c_1a_cui_cpdev_signupsigninsfi/.well-known/openid-configuration"
        }
      },
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      }
    }
  ]
}

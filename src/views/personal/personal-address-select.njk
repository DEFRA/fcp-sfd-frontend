{% extends 'common/layout.njk' %}

{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "common/navigation/back-sign-out-link.njk" import appBackSignOutLink with context %}
{% from "common/sub-header/macro.njk" import subHeader %}

{% block beforeContent %}
  {{ subHeader(userName=userName) }}
  {{ appBackSignOutLink(backLink) }}
{% endblock %}

{% block content %}
  {% if errors %}
    {{ govukErrorSummary({
        titleText: "There is a problem",
        errorList: errors | toErrorList
    }) }}
  {% endif %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form method="post" novalidate>
        <input type="hidden" name="crumb" value="{{ crumb }}">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
            <h1 class="govuk-fieldset__heading">
              {{ pageTitle }}
            </h1>
          </legend>
          <div class="govuk-form-group govuk-body">
            <span class="govuk-!-margin-bottom govuk-!-font-weight-bold">UK postcode</span>
            <div class="govuk-!-margin-bottom-">{{postcode}}</div>
            <a href="/account-address-change" class="govuk-link govuk-link--no-visited-state">Change <span class="govuk-visually-hidden">postcode</span></a>
          </div>

          {{ govukSelect({
            id: "addresses",
            name: "addresses",
            label: {
              html: '<div class="govuk-label govuk-!-font-weight-bold">Select an address</div>'
            },
            items: displayAddresses
          }) }}
        </fieldset>

        <p class="govuk-body"><a href="/account-address-enter" class="govuk-link govuk-link--no-visited-state">Enter address manually</a></p>

        {{ govukButton({ text: "Continue", preventDoubleClick: true }) }}
      </form>
    </div>
  </div>

{% endblock %}
